package w04_same_gmail_address

fun main() {

    fun extractUsername(email: String, domain: String): String? {

        val emailLC = email.lowercase()
        val domainLC = domain.lowercase()

        if (!emailLC.endsWith(domainLC)) return null

        val username = emailLC
            .split(domainLC)
            .first()
            .replace("[^a-zA-Z0-9+-]".toRegex(), "") // cleanup - remove other characters
            .replace("\\+.*".toRegex(), "")     // Remove + tails

        return username.ifEmpty { null }

    }

    fun getGmailUsername(gmail: String) = extractUsername(gmail, "@gmail.com")

    // Variations generated using the `generate.kt` file.
    val variations = listOf(
        "EXAMPLE@GMAIL.COM",
        "eXaMpL.E$$+hello@GmAiL.com",
        "e.xample@gmail.com",
        "ex.ample@gmail.com",
        "e.x.ample@gmail.com",
        "exa.mple@gmail.com",
        "e.xa.mple@gmail.com",
        "ex.a.mple@gmail.com",
        "e.x.a.mple@gmail.com",
        "exam.ple@gmail.com",
        "e.xam.ple@gmail.com",
        "ex.am.ple@gmail.com",
        "e.x.am.ple@gmail.com",
        "exa.m.ple@gmail.com",
        "e.xa.m.ple@gmail.com",
        "ex.a.m.ple@gmail.com",
        "e.x.a.m.ple@gmail.com",
        "examp.le@gmail.com",
        "e.xamp.le@gmail.com",
        "ex.amp.le@gmail.com",
        "e.x.amp.le@gmail.com",
        "exa.mp.le@gmail.com",
        "e.xa.mp.le@gmail.com",
        "ex.a.mp.le@gmail.com",
        "e.x.a.mp.le@gmail.com",
        "exam.p.le@gmail.com",
        "e.xam.p.le@gmail.com",
        "ex.am.p.le@gmail.com",
        "e.x.am.p.le@gmail.com",
        "exa.m.p.le@gmail.com",
        "e.xa.m.p.le@gmail.com",
        "ex.a.m.p.le@gmail.com",
        "e.x.a.m.p.le@gmail.com",
        "exampl.e@gmail.com",
        "e.xampl.e@gmail.com",
        "ex.ampl.e@gmail.com",
        "e.x.ampl.e@gmail.com",
        "exa.mpl.e@gmail.com",
        "e.xa.mpl.e@gmail.com",
        "ex.a.mpl.e@gmail.com",
        "e.x.a.mpl.e@gmail.com",
        "exam.pl.e@gmail.com",
        "e.xam.pl.e@gmail.com",
        "ex.am.pl.e@gmail.com",
        "e.x.am.pl.e@gmail.com",
        "exa.m.pl.e@gmail.com",
        "e.xa.m.pl.e@gmail.com",
        "ex.a.m.pl.e@gmail.com",
        "e.x.a.m.pl.e@gmail.com",
        "examp.l.e@gmail.com",
        "e.xamp.l.e@gmail.com",
        "ex.amp.l.e@gmail.com",
        "e.x.amp.l.e@gmail.com",
        "exa.mp.l.e@gmail.com",
        "e.xa.mp.l.e@gmail.com",
        "ex.a.mp.l.e@gmail.com",
        "e.x.a.mp.l.e@gmail.com",
        "exam.p.l.e@gmail.com",
        "e.xam.p.l.e@gmail.com",
        "ex.am.p.l.e@gmail.com",
        "e.x.am.p.l.e@gmail.com",
        "exa.m.p.l.e@gmail.com",
        "e.xa.m.p.l.e@gmail.com",
        "ex.a.m.p.l.e@gmail.com",
        "e.x.a.m.p.l.e@gmail.com",
        "example+test@gmail.com",
        "example+filter@gmail.com",
        "example+spam@gmail.com",
        "example+promo@gmail.com",
        "example+123@gmail.com",
        "e.xample+test@gmail.com",
        "e.xample+filter@gmail.com",
        "e.xample+spam@gmail.com",
        "e.xample+promo@gmail.com",
        "e.xample+123@gmail.com",
        "ex.ample+test@gmail.com",
        "ex.ample+filter@gmail.com",
        "ex.ample+spam@gmail.com",
        "ex.ample+promo@gmail.com",
        "ex.ample+123@gmail.com",
        "e.x.ample+test@gmail.com",
        "e.x.ample+filter@gmail.com",
        "e.x.ample+spam@gmail.com",
        "e.x.ample+promo@gmail.com",
        "e.x.ample+123@gmail.com",
        "exa.mple+test@gmail.com",
        "exa.mple+filter@gmail.com",
        "exa.mple+spam@gmail.com",
        "exa.mple+promo@gmail.com",
        "exa.mple+123@gmail.com",
        "e.xa.mple+test@gmail.com",
        "e.xa.mple+filter@gmail.com",
        "e.xa.mple+spam@gmail.com",
        "e.xa.mple+promo@gmail.com",
        "e.xa.mple+123@gmail.com",
        "ex.a.mple+test@gmail.com",
        "ex.a.mple+filter@gmail.com",
        "ex.a.mple+spam@gmail.com",
        "ex.a.mple+promo@gmail.com",
        "ex.a.mple+123@gmail.com",
        "e.x.a.mple+test@gmail.com",
        "e.x.a.mple+filter@gmail.com",
        "e.x.a.mple+spam@gmail.com",
        "e.x.a.mple+promo@gmail.com",
        "e.x.a.mple+123@gmail.com",
        "exam.ple+test@gmail.com",
        "exam.ple+filter@gmail.com",
        "exam.ple+spam@gmail.com",
        "exam.ple+promo@gmail.com",
        "exam.ple+123@gmail.com",
        "e.xam.ple+test@gmail.com",
        "e.xam.ple+filter@gmail.com",
        "e.xam.ple+spam@gmail.com",
        "e.xam.ple+promo@gmail.com",
        "e.xam.ple+123@gmail.com",
        "ex.am.ple+test@gmail.com",
        "ex.am.ple+filter@gmail.com",
        "ex.am.ple+spam@gmail.com",
        "ex.am.ple+promo@gmail.com",
        "ex.am.ple+123@gmail.com",
        "e.x.am.ple+test@gmail.com",
        "e.x.am.ple+filter@gmail.com",
        "e.x.am.ple+spam@gmail.com",
        "e.x.am.ple+promo@gmail.com",
        "e.x.am.ple+123@gmail.com",
        "exa.m.ple+test@gmail.com",
        "exa.m.ple+filter@gmail.com",
        "exa.m.ple+spam@gmail.com",
        "exa.m.ple+promo@gmail.com",
        "exa.m.ple+123@gmail.com",
        "e.xa.m.ple+test@gmail.com",
        "e.xa.m.ple+filter@gmail.com",
        "e.xa.m.ple+spam@gmail.com",
        "e.xa.m.ple+promo@gmail.com",
        "e.xa.m.ple+123@gmail.com",
        "ex.a.m.ple+test@gmail.com",
        "ex.a.m.ple+filter@gmail.com",
        "ex.a.m.ple+spam@gmail.com",
        "ex.a.m.ple+promo@gmail.com",
        "ex.a.m.ple+123@gmail.com",
        "e.x.a.m.ple+test@gmail.com",
        "e.x.a.m.ple+filter@gmail.com",
        "e.x.a.m.ple+spam@gmail.com",
        "e.x.a.m.ple+promo@gmail.com",
        "e.x.a.m.ple+123@gmail.com",
        "examp.le+test@gmail.com",
        "examp.le+filter@gmail.com",
        "examp.le+spam@gmail.com",
        "examp.le+promo@gmail.com",
        "examp.le+123@gmail.com",
        "e.xamp.le+test@gmail.com",
        "e.xamp.le+filter@gmail.com",
        "e.xamp.le+spam@gmail.com",
        "e.xamp.le+promo@gmail.com",
        "e.xamp.le+123@gmail.com",
        "ex.amp.le+test@gmail.com",
        "ex.amp.le+filter@gmail.com",
        "ex.amp.le+spam@gmail.com",
        "ex.amp.le+promo@gmail.com",
        "ex.amp.le+123@gmail.com",
        "e.x.amp.le+test@gmail.com",
        "e.x.amp.le+filter@gmail.com",
        "e.x.amp.le+spam@gmail.com",
        "e.x.amp.le+promo@gmail.com",
        "e.x.amp.le+123@gmail.com",
        "exa.mp.le+test@gmail.com",
        "exa.mp.le+filter@gmail.com",
        "exa.mp.le+spam@gmail.com",
        "exa.mp.le+promo@gmail.com",
        "exa.mp.le+123@gmail.com",
        "e.xa.mp.le+test@gmail.com",
        "e.xa.mp.le+filter@gmail.com",
        "e.xa.mp.le+spam@gmail.com",
        "e.xa.mp.le+promo@gmail.com",
        "e.xa.mp.le+123@gmail.com",
        "ex.a.mp.le+test@gmail.com",
        "ex.a.mp.le+filter@gmail.com",
        "ex.a.mp.le+spam@gmail.com",
        "ex.a.mp.le+promo@gmail.com",
        "ex.a.mp.le+123@gmail.com",
        "e.x.a.mp.le+test@gmail.com",
        "e.x.a.mp.le+filter@gmail.com",
        "e.x.a.mp.le+spam@gmail.com",
        "e.x.a.mp.le+promo@gmail.com",
        "e.x.a.mp.le+123@gmail.com",
        "exam.p.le+test@gmail.com",
        "exam.p.le+filter@gmail.com",
        "exam.p.le+spam@gmail.com",
        "exam.p.le+promo@gmail.com",
        "exam.p.le+123@gmail.com",
        "e.xam.p.le+test@gmail.com",
        "e.xam.p.le+filter@gmail.com",
        "e.xam.p.le+spam@gmail.com",
        "e.xam.p.le+promo@gmail.com",
        "e.xam.p.le+123@gmail.com",
        "ex.am.p.le+test@gmail.com",
        "ex.am.p.le+filter@gmail.com",
        "ex.am.p.le+spam@gmail.com",
        "ex.am.p.le+promo@gmail.com",
        "ex.am.p.le+123@gmail.com",
        "e.x.am.p.le+test@gmail.com",
        "e.x.am.p.le+filter@gmail.com",
        "e.x.am.p.le+spam@gmail.com",
        "e.x.am.p.le+promo@gmail.com",
        "e.x.am.p.le+123@gmail.com",
        "exa.m.p.le+test@gmail.com",
        "exa.m.p.le+filter@gmail.com",
        "exa.m.p.le+spam@gmail.com",
        "exa.m.p.le+promo@gmail.com",
        "exa.m.p.le+123@gmail.com",
        "e.xa.m.p.le+test@gmail.com",
        "e.xa.m.p.le+filter@gmail.com",
        "e.xa.m.p.le+spam@gmail.com",
        "e.xa.m.p.le+promo@gmail.com",
        "e.xa.m.p.le+123@gmail.com",
        "ex.a.m.p.le+test@gmail.com",
        "ex.a.m.p.le+filter@gmail.com",
        "ex.a.m.p.le+spam@gmail.com",
        "ex.a.m.p.le+promo@gmail.com",
        "ex.a.m.p.le+123@gmail.com",
        "e.x.a.m.p.le+test@gmail.com",
        "e.x.a.m.p.le+filter@gmail.com",
        "e.x.a.m.p.le+spam@gmail.com",
        "e.x.a.m.p.le+promo@gmail.com",
        "e.x.a.m.p.le+123@gmail.com",
        "exampl.e+test@gmail.com",
        "exampl.e+filter@gmail.com",
        "exampl.e+spam@gmail.com",
        "exampl.e+promo@gmail.com",
        "exampl.e+123@gmail.com",
        "e.xampl.e+test@gmail.com",
        "e.xampl.e+filter@gmail.com",
        "e.xampl.e+spam@gmail.com",
        "e.xampl.e+promo@gmail.com",
        "e.xampl.e+123@gmail.com",
        "ex.ampl.e+test@gmail.com",
        "ex.ampl.e+filter@gmail.com",
        "ex.ampl.e+spam@gmail.com",
        "ex.ampl.e+promo@gmail.com",
        "ex.ampl.e+123@gmail.com",
        "e.x.ampl.e+test@gmail.com",
        "e.x.ampl.e+filter@gmail.com",
        "e.x.ampl.e+spam@gmail.com",
        "e.x.ampl.e+promo@gmail.com",
        "e.x.ampl.e+123@gmail.com",
        "exa.mpl.e+test@gmail.com",
        "exa.mpl.e+filter@gmail.com",
        "exa.mpl.e+spam@gmail.com",
        "exa.mpl.e+promo@gmail.com",
        "exa.mpl.e+123@gmail.com",
        "e.xa.mpl.e+test@gmail.com",
        "e.xa.mpl.e+filter@gmail.com",
        "e.xa.mpl.e+spam@gmail.com",
        "e.xa.mpl.e+promo@gmail.com",
        "e.xa.mpl.e+123@gmail.com",
        "ex.a.mpl.e+test@gmail.com",
        "ex.a.mpl.e+filter@gmail.com",
        "ex.a.mpl.e+spam@gmail.com",
        "ex.a.mpl.e+promo@gmail.com",
        "ex.a.mpl.e+123@gmail.com",
        "e.x.a.mpl.e+test@gmail.com",
        "e.x.a.mpl.e+filter@gmail.com",
        "e.x.a.mpl.e+spam@gmail.com",
        "e.x.a.mpl.e+promo@gmail.com",
        "e.x.a.mpl.e+123@gmail.com",
        "exam.pl.e+test@gmail.com",
        "exam.pl.e+filter@gmail.com",
        "exam.pl.e+spam@gmail.com",
        "exam.pl.e+promo@gmail.com",
        "exam.pl.e+123@gmail.com",
        "e.xam.pl.e+test@gmail.com",
        "e.xam.pl.e+filter@gmail.com",
        "e.xam.pl.e+spam@gmail.com",
        "e.xam.pl.e+promo@gmail.com",
        "e.xam.pl.e+123@gmail.com",
        "ex.am.pl.e+test@gmail.com",
        "ex.am.pl.e+filter@gmail.com",
        "ex.am.pl.e+spam@gmail.com",
        "ex.am.pl.e+promo@gmail.com",
        "ex.am.pl.e+123@gmail.com",
        "e.x.am.pl.e+test@gmail.com",
        "e.x.am.pl.e+filter@gmail.com",
        "e.x.am.pl.e+spam@gmail.com",
        "e.x.am.pl.e+promo@gmail.com",
        "e.x.am.pl.e+123@gmail.com",
        "exa.m.pl.e+test@gmail.com",
        "exa.m.pl.e+filter@gmail.com",
        "exa.m.pl.e+spam@gmail.com",
        "exa.m.pl.e+promo@gmail.com",
        "exa.m.pl.e+123@gmail.com",
        "e.xa.m.pl.e+test@gmail.com",
        "e.xa.m.pl.e+filter@gmail.com",
        "e.xa.m.pl.e+spam@gmail.com",
        "e.xa.m.pl.e+promo@gmail.com",
        "e.xa.m.pl.e+123@gmail.com",
        "ex.a.m.pl.e+test@gmail.com",
        "ex.a.m.pl.e+filter@gmail.com",
        "ex.a.m.pl.e+spam@gmail.com",
        "ex.a.m.pl.e+promo@gmail.com",
        "ex.a.m.pl.e+123@gmail.com",
        "e.x.a.m.pl.e+test@gmail.com",
        "e.x.a.m.pl.e+filter@gmail.com",
        "e.x.a.m.pl.e+spam@gmail.com",
        "e.x.a.m.pl.e+promo@gmail.com",
        "e.x.a.m.pl.e+123@gmail.com",
        "examp.l.e+test@gmail.com",
        "examp.l.e+filter@gmail.com",
        "examp.l.e+spam@gmail.com",
        "examp.l.e+promo@gmail.com",
        "examp.l.e+123@gmail.com",
        "e.xamp.l.e+test@gmail.com",
        "e.xamp.l.e+filter@gmail.com",
        "e.xamp.l.e+spam@gmail.com",
        "e.xamp.l.e+promo@gmail.com",
        "e.xamp.l.e+123@gmail.com",
        "ex.amp.l.e+test@gmail.com",
        "ex.amp.l.e+filter@gmail.com",
        "ex.amp.l.e+spam@gmail.com",
        "ex.amp.l.e+promo@gmail.com",
        "ex.amp.l.e+123@gmail.com",
        "e.x.amp.l.e+test@gmail.com",
        "e.x.amp.l.e+filter@gmail.com",
        "e.x.amp.l.e+spam@gmail.com",
        "e.x.amp.l.e+promo@gmail.com",
        "e.x.amp.l.e+123@gmail.com",
        "exa.mp.l.e+test@gmail.com",
        "exa.mp.l.e+filter@gmail.com",
        "exa.mp.l.e+spam@gmail.com",
        "exa.mp.l.e+promo@gmail.com",
        "exa.mp.l.e+123@gmail.com",
        "e.xa.mp.l.e+test@gmail.com",
        "e.xa.mp.l.e+filter@gmail.com",
        "e.xa.mp.l.e+spam@gmail.com",
        "e.xa.mp.l.e+promo@gmail.com",
        "e.xa.mp.l.e+123@gmail.com",
        "ex.a.mp.l.e+test@gmail.com",
        "ex.a.mp.l.e+filter@gmail.com",
        "ex.a.mp.l.e+spam@gmail.com",
        "ex.a.mp.l.e+promo@gmail.com",
        "ex.a.mp.l.e+123@gmail.com",
        "e.x.a.mp.l.e+test@gmail.com",
        "e.x.a.mp.l.e+filter@gmail.com",
        "e.x.a.mp.l.e+spam@gmail.com",
        "e.x.a.mp.l.e+promo@gmail.com",
        "e.x.a.mp.l.e+123@gmail.com",
        "exam.p.l.e+test@gmail.com",
        "exam.p.l.e+filter@gmail.com",
        "exam.p.l.e+spam@gmail.com",
        "exam.p.l.e+promo@gmail.com",
        "exam.p.l.e+123@gmail.com",
        "e.xam.p.l.e+test@gmail.com",
        "e.xam.p.l.e+filter@gmail.com",
        "e.xam.p.l.e+spam@gmail.com",
        "e.xam.p.l.e+promo@gmail.com",
        "e.xam.p.l.e+123@gmail.com",
        "ex.am.p.l.e+test@gmail.com",
        "ex.am.p.l.e+filter@gmail.com",
        "ex.am.p.l.e+spam@gmail.com",
        "ex.am.p.l.e+promo@gmail.com",
        "ex.am.p.l.e+123@gmail.com",
        "e.x.am.p.l.e+test@gmail.com",
        "e.x.am.p.l.e+filter@gmail.com",
        "e.x.am.p.l.e+spam@gmail.com",
        "e.x.am.p.l.e+promo@gmail.com",
        "e.x.am.p.l.e+123@gmail.com",
        "exa.m.p.l.e+test@gmail.com",
        "exa.m.p.l.e+filter@gmail.com",
        "exa.m.p.l.e+spam@gmail.com",
        "exa.m.p.l.e+promo@gmail.com",
        "exa.m.p.l.e+123@gmail.com",
        "e.xa.m.p.l.e+test@gmail.com",
        "e.xa.m.p.l.e+filter@gmail.com",
        "e.xa.m.p.l.e+spam@gmail.com",
        "e.xa.m.p.l.e+promo@gmail.com",
        "e.xa.m.p.l.e+123@gmail.com",
        "ex.a.m.p.l.e+test@gmail.com",
        "ex.a.m.p.l.e+filter@gmail.com",
        "ex.a.m.p.l.e+spam@gmail.com",
        "ex.a.m.p.l.e+promo@gmail.com",
        "ex.a.m.p.l.e+123@gmail.com",
        "e.x.a.m.p.l.e+test@gmail.com",
        "e.x.a.m.p.l.e+filter@gmail.com",
        "e.x.a.m.p.l.e+spam@gmail.com",
        "e.x.a.m.p.l.e+promo@gmail.com",
        "e.x.a.m.p.l.e+123@gmail.com",
    )

    val usernames = variations
        .map { getGmailUsername(it) }
        .distinct()

    println("Usernames: $usernames") // Should say only "example" and nothing else.

}